<html lang="en">
    <head>
      <meta charset="utf-8">
    
      <title>API</title>
    </head>
    
    <body>
      <script src="web3.min.js"></script>
      <script src="burnchat.js"></script>
      <script type= "text/javascript">
      window.addEventListener('load', function() {
          let web3js;
          if (typeof web3 !== 'undefined') {
            web3js = new Web3(web3.currentProvider);
          } else {
            console.log('No web3? You should consider trying MetaMask!')
            web3js = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
          }

        /*
        Constructor has two arguments 1)Address of burnchat contract 2) web3 object
        There is a a copy of the contract on ropsten at the below address.
        */
        window.burnChatAPI = new BurnChatAPI("0x3ce3f3c6e086ff6741bde9db8f0a4407ec30ae3d", web3js);
        
        (async () => {
          const data = await window.burnChatAPI.loadHistory();
          //when we "await" a promise the method continues once it has resolved
          document.body.innerHTML = JSON.stringify(data);
          //stringify because bigNumbers in results
        })();
        })
      
      </script>
    </body>
</html>